<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style_buy.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <title>Document</title>
</head>
<body>
    <div class="top-navbar">
        <nav class="nav-links">
            <div><a href="contact.html">ติดต่อเรา</a></div>
            <div class="dropdown">
                <img src="image/user.png" alt="Logo" class="nav-logo">
                   <div class="dropdown-menu">
                    <a href="profile.html">โปรไฟล์</a>
                    <a href="order-history.html">ประวัติคำสั่งซื้อ</a>
                    <a href="claim.html">เคลมสินค้า</a>
                    <a href="logout.html">ออกจากระบบ</a>
                    </div>
            </div>
            <a href="index.html">
            <img src="image/united-states-of-america.png" alt="Logo" class="nav-logo">
            </a>
        </nav>
    </div>
    <!-- Navbar ชั้นล่าง -->
    <div class="main-navbar">
        <nav class="nav-links">
            <div><a href="index.html">หน้าแรก</a></div>
            <div><a href="reservation_car.html">จองคิวรถ</a></div>
            <a href="index.html">
                <img src="image/Logo.png" alt="Logo" class="nav-logo1">
            </a>
            <div><a href="shopping.html" style="color: E88B71;">ซื้อ/เช่าอุปกรณ์ทางการแพทย์</a></div>
        </nav>

        <div class="cart-icon">
            <a href="cart.html">
                <i class="fas fa-shopping-cart"></i>
            </a>
        </div>
    </div>

    <section class="order">
        <img id="product-image" src="" alt="รูปสินค้า">
        <div class="list">
            <p class="name" id="product-name"></p><br><br>
            <p class="cost" id="product-cost"></p>
    
            <!-- ย้ายส่วนเพิ่ม/ลด จำนวนไปข้างบนปุ่ม -->
            <div class="quantity">
                <button class="btn-decrease">-</button>
                <input type="number" class="quantity-input" value="1" min="1" max="12" />
                <button class="btn-increase">+</button>
                <p id="product-quantity"></p>
            </div>
        </div>
    
        <!-- ปุ่มอยู่ที่นี่ -->
        <div class="order-buttons">
            <a class="add-to-cart">เพิ่มไปยังตะกร้า</a>
            <a href="payment.html" class="confirm-order">ยืนยันการสั่งซื้อ</a>
        </div>
    </section>
    
    
    
    <script>
        // ฟังก์ชันสำหรับแสดงข้อมูลสินค้าตาม URL Query Parameters
        function loadProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const product = urlParams.get('product');

            const productDetails = {
                bed: {
                    name: "เตียงไฟฟ้า (ICU Hospital Bed ST-EHDA2)",
                    cost: "฿ 13,000",
                    image: "image/เตียงไฟฟ้า.jpg",
                    quantity: 11 // จำนวนสินค้าทั้งหมด
                },
                wheelchair: {
                    name: "รถเข็นผู้ป่วย (ST-YK9063 Double Cross Wheelchair)",
                    cost: "฿ 5,900",
                    image: "image/รถเข็น.jpg",
                    quantity: 8 // จำนวนสินค้าทั้งหมด
                },
                oxygen: {
                    name: "ชุดถังอ๊อกซิเจนทางการแพทย์ แบบอลูมิเนียม USA 0.5Q/MD",
                    cost: "฿ 5,500",
                    image: "image/ถังอ๊อก.jpg",
                    quantity: 12 // จำนวนสินค้าทั้งหมด
                }
            };

            if (productDetails[product]) {
                document.getElementById("product-name").textContent = productDetails[product].name;
                document.getElementById("product-cost").textContent = productDetails[product].cost;
                document.getElementById("product-image").src = productDetails[product].image;
                document.getElementById("product-quantity").textContent = `มีทั้งหมด ${productDetails[product].quantity} ชิ้น`;
                 // อัปเดต max ของ input
                document.querySelector(".quantity-input").max = productDetails[product].quantity;
                document.querySelector(".quantity-input").value = 1; // กำหนดค่าเริ่มต้น
            }
        }
        document.addEventListener("DOMContentLoaded", () => {
            loadProductDetails(); // เรียกฟังก์ชันเพื่อโหลดข้อมูลสินค้า
            const decreaseButton = document.querySelector(".btn-decrease");
            const increaseButton = document.querySelector(".btn-increase");
            const quantityInput = document.querySelector(".quantity-input");
            const maxQuantity = parseInt(quantityInput.max, 10); // ค่าสูงสุด (12)
            const minQuantity = parseInt(quantityInput.min, 10); // ค่าต่ำสุด (1)
    
            // ฟังก์ชันลดจำนวน
            decreaseButton.addEventListener("click", () => {
                let currentValue = parseInt(quantityInput.value, 10);
                if (currentValue > minQuantity) {
                    quantityInput.value = currentValue - 1;
                }
            });
    
            // ฟังก์ชันเพิ่มจำนวน
            increaseButton.addEventListener("click", () => {
                let currentValue = parseInt(quantityInput.value, 10);
                if (currentValue < maxQuantity) {
                    quantityInput.value = currentValue + 1;
                }
            });
    
            // ป้องกันการกรอกเกิน max/min ด้วยมือ
            quantityInput.addEventListener("input", () => {
                let currentValue = parseInt(quantityInput.value, 10);
                if (currentValue > maxQuantity) {
                    quantityInput.value = maxQuantity;
                } else if (currentValue < minQuantity) {
                    quantityInput.value = minQuantity;
                }
            });
        });
    </script>
    
</body>
</html>
